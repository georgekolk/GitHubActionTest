name: dev cicd pipeline

on:
  workflow_dispatch:
    inputs:
      destination:
        required: false
        type: choice
        description: Where to deploy
        default: 'stage'
        options:
          - stage
          - prod
  push:
    branches: [ "dev" ]
    env: devautorun: true 

jobs:
  build_back:
    runs-on: ubuntu-22.04
    steps:

    - name: checkout
      uses: actions/checkout@v3

    - name: Env mapping prod
      if: github.event.inputs.destination == 'prod' || env.devautorun == true 
      run: |
        echo "${{ env.devautorun }}"
        echo "${{ github.event.inputs.destinations }}"

